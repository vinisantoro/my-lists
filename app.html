<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Minha Lista de Itens</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="favicon.ico" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body class="light-mode">
    <div class="app-container">
      <div id="auth-section" style="display: flex">
        <div class="auth-overlay"></div>
        <div class="auth-forms-wrapper">
          <div class="auth-form-container" id="login-container">
            <h2><i class="fas fa-sign-in-alt"></i> Entrar na ListaSuper</h2>
            <form id="login-form">
              <div class="form-group">
                <label for="login-email">Email:</label>
                <input
                  type="email"
                  id="login-email"
                  required
                  placeholder="seuemail@exemplo.com"
                />
              </div>
              <div class="form-group">
                <label for="login-password">Senha:</label>
                <input
                  type="password"
                  id="login-password"
                  required
                  placeholder="Sua senha"
                />
              </div>
              <button type="submit" class="btn-auth">Entrar</button>
              <p class="auth-switch">
                Não tem conta? <a href="#" id="show-signup">Cadastre-se aqui</a>
              </p>
              <p class="auth-switch">
                <a
                  href="index.html"
                  id="go-to-landing-login"
                  class="auth-back-link"
                  >Voltar para o início</a
                >
              </p>
              <p id="login-error" class="auth-error"></p>
            </form>
          </div>

          <div
            class="auth-form-container"
            id="signup-container"
            style="display: none"
          >
            <h2><i class="fas fa-user-plus"></i> Crie sua Conta Gratuita</h2>
            <form id="signup-form">
              <p class="signup-intro">
                É rápido e fácil! Comece a organizar seus itens hoje mesmo.
              </p>
              <div class="form-group">
                <label for="signup-email">Email:</label>
                <input
                  type="email"
                  id="signup-email"
                  required
                  placeholder="seuemail@exemplo.com"
                />
              </div>
              <div class="form-group">
                <label for="signup-password">Senha:</label>
                <input
                  type="password"
                  id="signup-password"
                  required
                  minlength="6"
                  placeholder="Mínimo 6 caracteres"
                />
              </div>
              <button type="submit" class="btn-auth btn-signup">
                Criar Conta
              </button>
              <p class="auth-switch">
                Já tem conta? <a href="#" id="show-login">Faça login</a>
              </p>
              <p class="auth-switch">
                <a
                  href="index.html"
                  id="go-to-landing-signup"
                  class="auth-back-link"
                  >Voltar para o início</a
                >
              </p>
              <p id="signup-error" class="auth-error"></p>
            </form>
          </div>

          <div id="guest-mode-option" class="guest-mode-option">
            <p>
              Ou
              <button id="continue-guest" class="btn btn-secondary btn-guest">
                Continuar sem login</button
              ><br /><span class="guest-note"
                >(seus dados serão salvos apenas neste navegador)</span
              >
            </p>
          </div>
        </div>
      </div>

      <div id="app-content" style="display: none">
        <section id="lists-section">
          <div class="container">
            <header class="list-header">
              <h1><i class="fas fa-list"></i> Minhas Listas</h1>
              <div class="controls">
                <button id="theme-toggle-lists" class="theme-toggle" aria-label="Alternar Tema">
                  <i class="fas fa-moon"></i>
                </button>
                <button id="create-list"><i class="fas fa-plus"></i> Criar Lista</button>
                <button id="export-data-lists">
                  <i class="fas fa-file-export"></i> Exportar Dados
                </button>
                <label for="import-file-lists" class="button-like-label"
                  ><i class="fas fa-file-import"></i> Importar Dados</label
                >
                <input
                  type="file"
                  id="import-file-lists"
                  accept=".json"
                  style="display: none"
                />
                <button id="logout-button-lists" style="display: none">
                  <i class="fas fa-sign-out-alt"></i> Sair
                </button>
                <button id="export-data-lists">
                  <i class="fas fa-file-export"></i> Exportar Dados
                </button>
                <label for="import-file-lists" class="button-like-label"
                  ><i class="fas fa-file-import"></i> Importar Dados</label
                >
                <input
                  type="file"
                  id="import-file-lists"
                  accept=".json"
                  style="display: none"
                />
                <button id="logout-button-lists" style="display: none">
                  <i class="fas fa-sign-out-alt"></i> Sair
                </button>
              </div>
            </header>
            <div class="table-wrapper">
              <table id="lists-table">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>Criada em</th>
                    <th>Atualizada em</th>
                    <th>Dono</th>
                    <th>Compartilhado com</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="items-section" style="display: none">
          <div class="container">
          <header>
              <div class="header-left">
                <h1>
                  <i class="fas fa-list-check"></i>
                  <span id="list-name" contenteditable="true">Minha Lista</span>
                  <span id="mode-indicator"></span>
                </h1>
              <span id="user-email-display" class="user-email"></span>
            </div>
            <div class="controls">
              <button id="theme-toggle" class="theme-toggle" aria-label="Alternar Tema">
                <i class="fas fa-moon"></i>
              </button>
              <button id="export-data">
                <i class="fas fa-file-export"></i> Exportar Dados
              </button>
              <label for="import-file" class="button-like-label"
                ><i class="fas fa-file-import"></i> Importar Dados</label
              >
              <input
                type="file"
                id="import-file"
                accept=".json"
                style="display: none"
              />
                <button id="share-list" style="display: none">
                  <i class="fas fa-share-alt"></i> Compartilhar Lista
                </button>
                <button id="back-to-lists" style="display: none">
                  <i class="fas fa-list"></i> Listas
                </button>
              <button
                id="upgrade-to-premium"
                style="display: none"
                class="btn btn-premium-cta"
              >
                <i class="fas fa-star"></i> Fazer Upgrade para Premium
              </button>
              <button id="logout-button" style="display: none">
                <i class="fas fa-sign-out-alt"></i> Sair
              </button>
            </div>
          </header>

          <form id="item-form">
            <h2><i class="fas fa-plus-circle"></i> Adicionar Novo Item</h2>
            <div class="form-grid">
              <div class="form-group">
                <label for="item-category">Categoria:</label
                ><input
                  type="text"
                  id="item-category"
                  list="category-list"
                  required
                  placeholder="Ex: Eletrônicos"
                /><datalist id="category-list"></datalist>
              </div>
              <div class="form-group">
                <label for="item-brand">Marca/Modelo:</label
                ><input
                  type="text"
                  id="item-brand"
                  list="brand-list"
                  required
                  placeholder="Ex: Samsung Galaxy S23"
                /><datalist id="brand-list"></datalist>
              </div>
              <div class="form-group">
                <label for="item-name">Nome do Produto:</label
                ><input
                  type="text"
                  id="item-name"
                  required
                  placeholder="Ex: Smartphone Principal"
                />
              </div>
              <div class="form-group full-width">
                <label for="item-notes">Anotações:</label
                ><textarea id="item-notes" placeholder="Detalhes..."></textarea>
              </div>
              <div class="form-group full-width">
                <label
                  >Ranking (0-5):
                  <span id="current-rating-display">0.0</span></label
                >
                <div class="star-rating-input" id="form-star-rating"></div>
                <input type="hidden" id="item-rating-hidden" value="0" />
              </div>
            </div>
            <button type="submit" class="btn-add">
              <i class="fas fa-plus"></i> Adicionar Item
            </button>
          </form>

          <div id="category-tabs-container" class="tabs"></div>

          <div class="list-container">
            <div class="list-header">
              <h2 id="list-title">
                <i class="fas fa-archive"></i> Itens Cadastrados
              </h2>
              <button
                id="delete-category"
                class="btn-delete-category"
                style="display: none"
              >
                <i class="fas fa-trash"></i> Excluir Categoria
              </button>
            </div>
            <div class="table-wrapper">
              <table id="items-table">
                <thead>
                  <tr>
                    <th>Categoria</th>
                    <th>Marca/Modelo</th>
                    <th>Produto</th>
                    <th>Anotações</th>
                    <th>Ranking</th>
                    <th>Ações</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </div>
        </section>
      </div>

    <div id="share-modal" class="modal">
      <div class="modal-content">
        <h2><i class="fas fa-share-alt"></i> Compartilhar Lista</h2>
        <form id="share-form">
          <div class="form-group share-date-group">
            <label for="share-email">Email:</label>
            <input
              type="email"
              id="share-email"
              required
              placeholder="usuario@exemplo.com"
            />
          </div>
          <div class="form-group switch-group">
            <label for="share-recording" class="switch-label">Gravação</label>
            <label class="switch">
              <input type="checkbox" id="share-recording" />
              <span class="slider-toggle"></span>
            </label>
          </div>
          <div class="modal-buttons">
            <button type="button" id="share-cancel-btn" class="btn-cancel">
              Cancelar
            </button>
            <button
              type="submit"
              id="share-save-btn"
              class="btn-confirm positive-action"
            >
              Salvar
            </button>
          </div>
        </form>
        <div id="shared-users-container">
          <h3>Compartilhado com:</h3>
          <ul id="shared-users-list"></ul>
        </div>
      </div>
    </div>
    <div id="create-list-modal" class="modal">
      <div class="modal-content">
        <h2><i class="fas fa-plus"></i> Nova Lista</h2>
        <form id="create-list-form">
          <div class="form-group new-list-date-group">
            <label for="new-list-name">Nome:</label>
            <input type="text" id="new-list-name" required />
          </div>
          <div class="modal-buttons">
            <button type="button" id="create-list-cancel" class="btn-cancel">Cancelar</button>
            <button type="submit" id="create-list-save" class="btn-confirm positive-action">Salvar</button>
          </div>
        </form>
      </div>
    </div>

    <div id="confirmation-modal" class="modal">
      <div class="modal-content">
        <i id="modal-icon" class="modal-icon fas fa-question-circle"></i>
        <p id="modal-message">Tem certeza?</p>
        <div class="modal-buttons">
          <button id="modal-confirm-btn" class="btn-confirm">Confirmar</button>
          <button id="modal-cancel-btn" class="btn-cancel">Cancelar</button>
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <script src="script-app.js"></script>
  </body>
</html>
